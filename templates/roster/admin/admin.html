{%  extends 'base.html' %}
{% load static %}

{% block css_block %}
<link href="{% static "assets/plugins/custom/datatables/datatables.bundle.css"%}" rel="stylesheet" type="text/css" />
<link href="{% static "assets/css/pages/roster/shifts.css"%}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block page_title %}
 {{page_title}}
{% endblock %}

{% block subheader-item %}

<!--begin::Actions-->
<div class="d-flex align-items-center py-1">
    <!--begin::Wrapper-->
    <div class="me-4">
        <!--begin::Menu-->
        <a href="#" id="shift_claim_model" data-bs-toggle="modal" data-bs-target="#kt_shift_claim" class="btn btn-sm btn-flex btn-primary btn-active-success fw-bolder" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end">Verify shift claim</a>
        
        <!--end::Menu-->
    </div>
    <!--end::Wrapper-->
</div>
<!--end::Actions-->

<!--begin::Actions-->
<div class="d-flex align-items-center py-1">
    <!--begin::Wrapper-->
    <div class="me-4">
        <!--begin::Menu-->
        <a href="{% url "roster:shift_preferences_html"%}" class="btn btn-sm btn-flex btn-primary btn-active-success fw-bolder">Set Preference</a>
        
        <!--end::Menu-->
    </div>
    <!--end::Wrapper-->
</div>
<!--end::Actions-->

{% endblock %}

{% block subheader-button %}

<a href="{% url "roster:shift_type_html"%}" class="btn btn-sm btn-primary me-3">Shift Type</a>
<a href="{% url "roster:admin_shift_planner"%}" class="btn btn-sm btn-primary me-3">Shift Planner</a>


{% endblock %}

{% block body %}
<!--begin::Row-->
<div class="row gy-5 g-xl-8">
    <!--begin::Col-->
    <div class="col-xl-6">
        <!--begin::List Widget 3-->
        <div class="card card-xl-stretch mb-xl-8">
            <!--begin::Header-->
            <div class="card-header border-0">
                <h3 class="card-title align-items-start flex-column">
                    <span class="card-label fw-bolder text-dark">Shift change Request</span>
                    <span class="text-muted mt-1 fw-bold fs-7">Waiting for your approval</span>
                </h3>
            </div>
            <!--end::Header-->
            <!--begin::Body-->
            <div class="card-body pt-2">
                <table class="table table-row-dashed table-row-gray-300 gy-7">
                    <thead>
                        <tr class="fw-bolder fs-6 text-gray-800" align="center">
                            <th style="width:300px;">Requester</th>
                            <th>Request</th>
                            <th>View</th>
                        </tr>
                    </thead>
                    <tbody id="change_request_table_body_div" class="text-start text-gray-400 fw-bolder fs-6 text-uppercase gs-0">
                        
                    </tbody>
                </table>
            </div>
            <!--end::Body-->
        </div>
        <!--end:List Widget 3-->
    </div>
    <!--end::Col-->
    <!--begin::Col-->
    <div class="col-xl-6">
        <!--begin::List Widget 3-->
        <div class="card card-xl-stretch mb-xl-8">
            <!--begin::Header-->
            <div class="card-header border-0">
                <h3 class="card-title align-items-start flex-column">
                    <span class="card-label fw-bolder text-dark">Leave Request</span>
                    <span class="text-muted mt-1 fw-bold fs-7">Waiting for your approval</span>
                </h3>
            </div>
            <!--end::Header-->
            <!--begin::Body-->
            <div class="card-body pt-2">
                <table class="table table-row-dashed table-row-gray-300 gy-7">
                    <thead>
                        <tr class="fw-bolder fs-6 text-gray-800" align="center">
                            <th style="width:300px;">Requester</th>
                            <th>Request</th>
                            <th>View</th>
                        </tr>
                    </thead>
                    <tbody id="leave_request_table_body_div" class="text-start text-gray-400 fw-bolder fs-6 text-uppercase gs-0">
                        
                    </tbody>
                </table>
            </div>
            <!--end::Body-->
        </div>
        <!--end:List Widget 3-->
    </div>
    <!--end::Col-->
</div>
<!--end::Row-->

<!--begin::Row-->
<div class="row gy-5 g-xl-8">

    <!--begin::Col-->
    <div class="col-xl-12">
        <!--begin::List Widget 3-->
        <div class="card card-xl-stretch mb-xl-8">
            <!--begin::Header-->
            <div class="card-header border-0">
                <h3 class="card-title align-items-start flex-column">
                    <span class="card-label fw-bolder text-dark">Work Group Request</span>
                    <span class="text-muted mt-1 fw-bold fs-7">Waiting for approval</span>
                </h3>
                <div class="card-toolbar">
                    <a href="#" class="btn btn-sm btn-secondary" data-bs-toggle="modal" data-bs-target="#kt_model_work_group_from_view">Create Request</a>
                </div>
            </div>
            <!--end::Header-->
            <!--begin::Body-->
            <ul class="nav nav-pills nav-fill mb-3" id="pills-tab" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Request waitig for your approval</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Your Request</button>
                </li>
              </ul>
              <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active p-3" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                    <table class="table table-row-dashed table-row-gray-300 gy-7">
                        <thead>
                            <tr class="fw-bolder fs-6 text-gray-800" align="center">
                                <th style="width:300px;">Requested Member</th>
                                <th>Change To</th>
                                <th>Request by</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="work_group_request_table_body_div" class="text-start text-gray-400 fw-bolder fs-6 text-uppercase gs-0">
                            
                        </tbody>
                    </table>
                </div>
                <div class="tab-pane fade p-3" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                    <table class="table table-row-dashed table-row-gray-300 gy-7">
                        <thead>
                            <tr class="fw-bolder fs-6 text-gray-800" align="center">
                                <th style="width:300px;">Requested Member</th>
                                <th>Change To</th>
                                <th>Request by</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="work_group_my_request_table_body_div" class="text-start text-gray-400 fw-bolder fs-6 text-uppercase gs-0">
                            
                        </tbody>
                    </table>
                        
                </div>
              </div>
            <!--end::Body-->
        </div>
        <!--end:List Widget 3-->
    </div>
    <!--end::Col-->
</div>
<!--end::Row-->

<!--begin::Row-->
<div class="row gy-5 g-xl-8">
    <!--begin::Col-->
    <div class="col-xl-6">
        <!--begin::List Widget 3-->
        <div class="card card-xl-stretch mb-xl-8">
            <!--begin::Header-->
            <div class="card-header border-0">
                <h3 class="card-title align-items-start flex-column">
                    <span class="card-label fw-bolder text-dark">Swap Request</span>
                    <span class="text-muted mt-1 fw-bold fs-7">Waiting for your approval</span>
                </h3>
            </div>
            <!--end::Header-->
            <!--begin::Body-->
            <div class="card-body pt-2">
                <table class="table table-row-dashed table-row-gray-300 gy-7">
                    <thead>
                        <tr class="fw-bolder fs-6 text-gray-800" align="center">
                            <th style="width:300px;">Request From</th>
                            <th>Request To</th>
                            <th>View</th>
                        </tr>
                    </thead>
                    <tbody id="swap_request_table_body_div" class="text-start text-gray-400 fw-bolder fs-6 text-uppercase gs-0">
                        
                    </tbody>
                </table>
            </div>
            <!--end::Body-->
        </div>
        <!--end:List Widget 3-->
    </div>
    <!--end::Col-->
</div>
<!--end::Row-->

<!--begin::CHANGE_REQUEST_BEGIN-->
<div class="modal fade" tabindex="-1" id="kt_model_change_request">
    <div class="modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-body">

                <div class="row mt-10">
                    
                    <div class="accordion accordion-icon-toggle" id="kt_request_info_acct"></div>
                    
                </div>

                <div class="row">
                    
                </div>

                <div id="change_request_btn_div" class="d-flex justify-content-end mt-5">
                    
                </div>

                <div class="separator separator-dashed border-gray-300 my-10"></div>

                <h2 class="mb-10 text-gray-400" id="basic"><a href="#basic"></a># Shift Members</h2>
                
                <div class="row mt-5" id="shift_member_div"></div>

                
            </div>
        </div>
    </div>
</div>
<!--begin::CHANGE_REQUEST_END-->


<!--begin::SWAP-REQUEST-FROM-->
<div class="modal fade" tabindex="-1" id="kt_model_r_from_view">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-gray-700">Swap Request</h5>
                <div id="swap_request_action_btn_div"></div>
            </div>

            <div class="modal-body">

                <div id="time_line"></div>

                <div class="separator separator-dashed border-gray-400 my-10"></div>

                <div class="row mt-10">
                    <div class="col-6 align-center">
                        <h3 class="mb-5" id="req_shift_info_title">Request from shift info</h3>
                        <div id="requested_from_shift_info"></div>
                    </div>
                    <div class="col-6 align-center">
                        <h3 class="mb-5" id="sm_approver_shift_info_title">Request to shift info</h3>
                        <div id="requested_to_shift_info"></div>
                    </div>
                </div>
                
            </div>

        </div>
    </div>
</div>
<!--end::SWAP-REQUEST-FROM-->

<!--begin::CREATE-WORK-GROUP-FROM-->
<div class="modal fade" tabindex="-1" id="kt_model_work_group_from_view">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title text-gray-700">Work Group Change Request</h5>
                <div id="swap_request_action_btn_div"></div>
            </div>

            <div class="modal-body">

                <div class="form-floating mb-7">
                    <select id="user_list_dropdown" class="form-select form-select-solid" data-dropdown-parent="#kt_model_work_group_from_view" data-control="select2" data-placeholder="Shift Members" data-allow-clear="true">
                        {%for usr in user_list%}
                            <option value="{{usr.id}}">{{usr.username}} - {{usr.name}}</option>
                        {%endfor%}
                    </select>
                </div>
                
                <div class="form-floating mb-7">
                    <select id="sub_team_list_dropdown" class="form-select form-select-solid" data-dropdown-parent="#kt_model_work_group_from_view" data-control="select2" data-placeholder="Work Group" data-allow-clear="true">
                        {%for stm in sub_team%}
                            <option value="{{stm.code}}">{{stm.name}}</option>
                        {%endfor%}
                    </select>
                </div>
                
            </div>

            <div class="modal-footer">
                <button type="button" id="create_work_group_request_btn" code="" class="btn btn-primary">Create</button>
            </div>

        </div>
    </div>
</div>
<!--end::CREATE-WORK-GROUP-FROM-->

<!--begin::SHIFT CLAIM-->
<div class="modal fade" tabindex="-1" id="kt_shift_claim">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                
                <!--begin::Button-->
                <a href="#" id="prev_btn" class="btn btn-sm btn-outline btn-outline-dashed btn-outline-primary btn-active-light-primary me-3 ps-3"><i class="las la-chevron-left fs-4 me-2"></i>Previous</a>
                <!--end::Button-->

                <h5 class="modal-title text-gray-700" id="claim_month"></h5>
                
                <!--begin::Button-->
                <a href="#" id="next_btn" class="btn btn-sm btn-outline btn-outline-dashed btn-outline-primary btn-active-light-primary me-3 pe-3">Next<i class="las la-chevron-right fs-4 ms-2"></i></a>
                <!--end::Button-->
            </div>
            <input type="text" id="search_box_input" class="form-control form-control-solid mb-5" placeholder="Search Here"/>
            <div class="modal-body">
                
                <!--begin::Datatable-->
                <table id="kt_datatable_host_nw" class="table table-row-dashed table-rounded border border-gray-300 table-row-bordered table-row-gray-300 gy-7 gs-7">
                    <thead>
                        <tr class="text-gray-400 fw-bolder fs-6 text-uppercase gs-0 table_header h1-font-size" align="center">
                            <th>Shift Members</th>
                            <th>Claim</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-700 fw-bold fs-5">
                    </tbody>
                </table>
                <!--end::Datatable-->
                
            </div>
        </div>
    </div>
</div>
<!--end::SHIFT_CLAIM-->

{% endblock %}

{% block js_block %}
<script src="{% static "assets/js/csrfsafe.js"%}" type="text/javascript"></script>
<script src="{% static "assets/plugins/custom/datatables/datatables.bundle.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/shift_dom.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/change_request.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/leave_request.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/get_request_info.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/update_command.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/change_request_action.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/swap_request.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/view_swap_request.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/swap_request_action.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/work_group_request.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/work_group_actions.js"%}"></script>
<script src="{% static "assets/js/pages/roster/admin/shift_claim.js"%}"></script>
<script type="text/javascript" src="https://cdn.rawgit.com/ashl1/datatables-rowsgroup/fbd569b8768155c7a9a62568e66a64115887d7d0/dataTables.rowsGroup.js"></script>
{% endblock %}
